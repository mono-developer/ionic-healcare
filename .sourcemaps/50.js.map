{"version":3,"sources":["../../src/pages/link-edit/link-edit.ts","../../src/pages/link-edit/link-edit.module.ts"],"names":[],"mappings":"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","file":"50.js","sourcesContent":["import { Component } from '@angular/core';\nimport { NavController, NavParams, LoadingController, ModalController, AlertController, IonicPage, ViewController } from 'ionic-angular';\nimport { BarcodeScanner ,BarcodeScannerOptions } from '@ionic-native/barcode-scanner';\nimport { Storage } from '@ionic/storage';\nimport { UserService } from \"../../providers/user-service\";\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\n\n@IonicPage()\n@Component({\n  selector: 'page-link-edit',\n  templateUrl: 'link-edit.html'\n})\nexport class LinkEditPage {\n  linkForm: FormGroup;  \n  public profile_id:any;\n  scanData : {};\n  options :BarcodeScannerOptions;\n  public email:any;\n  public auth_token:any;\n  public link_info:any = { id:\"\", pin:\"\", label:\"\" };\n  public id_band_data:any;\n  public manu_info:any = {};\n\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public modalCtrl: ModalController,\n    public viewCtrl: ViewController,\n    public barcodeScanner: BarcodeScanner,\n    public storage: Storage,\n    public loadingCtrl: LoadingController,\n    public userService: UserService,\n    public alertCtrl: AlertController,\n    public formBuilder: FormBuilder\n  ) {\n    this.profile_id = navParams.get(\"profile_id\");\n    this.linkForm = formBuilder.group({\n      id: ['', Validators.required],\n      pin: ['', Validators.required],\n      label: ['', Validators.required],\n    });\n  }\n\n\n  ngOnInit(){\n    this.storage.get('email').then(val=>{\n      this.email = val;\n    });\n\n    this.storage.get('auth_token').then(val=>{\n      this.auth_token = val;\n    });\n  }\n\n  presentAlert(title, subTitle) {\n    let alert = this.alertCtrl.create({\n     title: title, subTitle: subTitle, buttons: ['OK'] });\n     alert.present();\n   }\n\n  scan(){\n    this.options = {\n        prompt : \"Scan your QR Code.\"\n    }\n    this.barcodeScanner.scan(this.options).then((barcodeData) => {\n\n        console.log(barcodeData);\n        this.scanData = barcodeData.text;\n\n        let loading = this.loadingCtrl.create();\n        loading.present();\n\n        this.userService.checkIdPin(this.email, this.auth_token, this.scanData)\n          .subscribe(\n            (data) => {\n              loading.dismiss();\n              if(data.success == false){\n                  if (data.error_code == \"1003\"){\n                    this.presentAlert( \"Link A MyID Product Save Failed\", \"There is a problem with this product. Please contact customer support at (888) 500-9720\");\n                  }\n                  else if (data.error_code == \"1002\"){\n                    this.presentAlert( \"Link A MyID Product Save Failed\", \"The product is already linked to \" + data.first_name + \"'s profile.\");\n                  }\n\n               }else{\n                 console.log(\"Check ID Pin:\" + JSON.stringify(data));\n                 this.link_info.id=data.id;\n                 this.link_info.pin=data.pin;\n                 this.linkToProfile();\n               }\n            },\n            (data) => {\n              loading.dismiss();\n              this.presentAlert( \"Link A MyID Product Save Failed\", \"There is a problem with this product. Please contact customer support at (888) 500-9720\");\n            });\n    }, (err) => {\n        console.log(\"Error occured : \" + err);\n    });\n  }\n\n  linkToProfile(){\n    let loading = this.loadingCtrl.create();\n    loading.present();\n\n    this.userService.createIdBands(this.email, this.auth_token, this.profile_id, \"\", this.link_info.id, this.link_info.pin)\n      .subscribe(\n        (data) => {\n          loading.dismiss();\n          if(data.success == false){\n            if (data.error_code == \"1003\"){\n              this.presentAlert( \"Link A MyID Product Save Failed\", \"There is a problem with this product. Please contact customer support at (888) 500-9720\");\n            }\n            else if (data.error_code == \"1002\"){\n              this.presentAlert( \"Link A MyID Product Save Failed\", \"The product is already linked to \" + data.first_name + \"'s profile.\");\n            }\n           }else{\n             console.log(\"Link To Profile:\" + JSON.stringify(data));\n             this.id_band_data=data;\n             console.log('id_band_data', this.id_band_data)\n\n             console.log('go ProductSuccessPage');\n             let profileModal = this.modalCtrl.create('ProductSuccessPage',\n               { page: 'likeEdit', data: data, profile_id:this.profile_id});\n             profileModal.present();\n\n           }\n\n        },\n        (data) => {\n          console.log(\"Link To Profile:\" + JSON.stringify(data));\n          loading.dismiss();\n          this.presentAlert( \"Link A MyID Product Save Failed\", \"There is a problem with this product. Please contact customer support at (888) 500-9720\");\n        });\n  }\n\n  createManualLink(){\n    console.log('manual');\n    let loading = this.loadingCtrl.create();\n    loading.present();\n    this.userService.createIdBands(this.email, this.auth_token, this.profile_id, this.link_info.label, this.link_info.id, this.link_info.pin)\n      .subscribe(\n        (data) => {\n          loading.dismiss();\n          console.log(data);\n          if(data.success == false){\n            if (data.error_code == \"1003\"){\n              this.presentAlert( \"Link A MyID Product Save Failed\", \"There is a problem with this product. Please contact customer support at (888) 500-9720\");\n            }\n            else if (data.error_code == \"1002\"){\n              this.presentAlert( \"Link A MyID Product Save Failed\", \"The product is already linked to \" + data.first_name + \"'s profile.\");\n            }\n           }else{\n             this.id_band_data=data;\n             console.log('id_band_data', this.id_band_data);\n             this.viewCtrl.dismiss({ data: 'success' });\n           }\n        },\n        (data) => {\n          console.log(\"Link To Profile:\" + JSON.stringify(data));\n          loading.dismiss();\n          this.presentAlert( \"Link A MyID Product Save Failed\", \"There is a problem with this product. Please contact customer support at (888) 500-9720\");\n        });\n  }\n\n  cancel(){\n    this.navCtrl.pop();\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/link-edit/link-edit.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LinkEditPage } from './link-edit';\n@NgModule({\n    declarations: [\n        LinkEditPage,\n    ],\n    imports: [\n        IonicPageModule.forChild(LinkEditPage),\n    ],\n    exports: [\n        LinkEditPage\n    ]\n})\nexport class LinkEditPageModule {\n    \n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/link-edit/link-edit.module.ts"],"sourceRoot":""}