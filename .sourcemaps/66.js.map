{"version":3,"sources":["../../src/pages/add-dependent/add-dependent.ts","../../src/pages/add-dependent/add-dependent.module.ts"],"names":[],"mappings":"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","file":"66.js","sourcesContent":["import { Component } from '@angular/core';\nimport { NavController, NavParams, ViewController, LoadingController, IonicPage } from 'ionic-angular';\nimport { Storage } from '@ionic/storage';\nimport { Camera, CameraOptions } from '@ionic-native/camera';\nimport { ActionSheet, ActionSheetOptions } from '@ionic-native/action-sheet';\nimport { Crop } from '@ionic-native/crop';\nimport { FileTransfer, FileUploadOptions, FileTransferObject } from '@ionic-native/file-transfer';\nimport { File } from '@ionic-native/file';\nimport { UserService } from \"../../providers/user-service\";\nimport { BaseService } from \"../../providers/base-service\";\nimport { Flags } from \"../../providers/flag\";\nimport { CountryService } from '../../providers/country-service';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\n\n@IonicPage()\n@Component({\n  selector: 'page-add-dependent',\n  templateUrl: 'add-dependent.html'\n})\nexport class AddDependentPage {\n\n  public profile_info: any = {first_name:'', last_name: '', gender:'', birth_date:'', city:'', state:'', country:'', zip:''};\n  // public profile_info: any = {};\n  dependentForm: FormGroup;  \n  public email: string;\n  public auth_token: string;\n  public imageChosen: any = 0;\n  public imagePath: any;\n  public imageNewPath: any;\n  public genders:any;\n  public countries:any;\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public viewCtrl:ViewController,\n    public camera: Camera,\n    private crop: Crop,\n    public actionSheet: ActionSheet,\n    public storage:Storage,\n    public loadingCtrl:LoadingController,\n    public userService:UserService,\n    public file:File,\n    public baseService:BaseService,\n    public fileTransfer: FileTransfer,\n    private flagService: Flags,\n    public countryService: CountryService,\n    public formBuilder: FormBuilder\n    \n  ) {\n\n      this.genders = [{ title:\"Female\", value:\"female\"},\n                      { title:\"Male\", value:\"male\"} ];\n      this.countries = this.countryService.getCountries();\n\n      this.dependentForm = formBuilder.group({\n        first_name: ['', Validators.required],\n        last_name: ['', Validators.required],\n        gender: ['', Validators.required],\n        birth_date: ['', Validators.required],\n        city: ['', Validators.required],\n        state: ['', Validators.required],\n        country: ['', Validators.required],\n        zip: ['']\n      });\n  }\n\n  ngOnInit(){\n    this.storage.get('email').then(val=>{\n      this.email = val;\n    });\n\n    this.storage.get('auth_token').then(val=>{\n      this.auth_token = val;\n    });\n  }\n\n  getPicture(){\n\n    console.log(\"getPicture\");\n\n \t\tlet buttonLabels = ['Photo Library', 'Camera'];\n \t\tthis.actionSheet\n \t\t\t.show({\n \t\t\t\ttitle: 'Source Library',\n \t\t\t\tbuttonLabels: buttonLabels,\n \t\t\t\taddCancelButtonWithLabel: 'Cancel',\n \t\t\t\tdestructiveButtonLast: true\n \t\t\t})\n \t\t\t.then((buttonIndex: number) => {\n \t\t\t\tswitch (buttonIndex) {\n \t\t\t\t\tcase 1:\n           let options:CameraOptions = {\n              destinationType: this.camera.DestinationType.FILE_URI,\n              encodingType: this.camera.EncodingType.JPEG,\n              mediaType: this.camera.MediaType.PICTURE,\n              sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,\n            }\n            this.camera.getPicture(options).then((imageData) => {\n              this.crop.crop(imageData, {quality: 75})\n              .then(newImage => {\n                console.log('NewImage', newImage);\n                this.imagePath = newImage;\n                // this.updatePhoto();\n                },error=>console.error('Error cropping image', JSON.stringify(error))\n              );\n             }, (err) => {\n              alert(JSON.stringify(err))\n             });\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase 2:\n             let options1:CameraOptions = {\n               destinationType: this.camera.DestinationType.FILE_URI,\n               encodingType: this.camera.EncodingType.JPEG,\n               sourceType: this.camera.PictureSourceType.CAMERA,\n             }\n             this.camera.getPicture(options1).then((imageData) => {\n              this.crop.crop(imageData, {quality: 75})\n                .then(newImage => {\n                  console.log('NewImage', newImage);\n                  this.imagePath = newImage;\n                  // this.updatePhoto();\n                },error => console.error('Error cropping image', error)\n              );\n            }, (err) => {\n              alert(JSON.stringify(err))\n            });\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tdefault:\n \t\t\t\t\t\tbreak;\n \t\t\t\t}\n \t\t});\n  }\n\n  createProfile(){\n\n    console.log('CreateProfile');\n\n    let loading = this.loadingCtrl.create();\n    loading.present();\n\n    if (this.imagePath){\n\n      let filename = this.imagePath.split('/').pop();\n\n      // console.log(\"filekey: \", profile[image]);\n      console.log(\"fileName: \", filename);\n      console.log(\"imagePath: \", this.imagePath);\n\n\n      let options = {\n        fileKey: \"profile[image]\",\n        fileName: filename,\n        chunkedMode: false,\n        mimeType: \"image/jpg\",\n        headers:\n          {'auth_token': this.auth_token, 'email': this.email}\n        ,\n        params: {\n            'profile[first_name]':this.profile_info.first_name,\n            'profile[last_name]':this.profile_info.last_name,\n            'profile[gender]':this.profile_info.gender,\n            'profile[birth_date]':this.profile_info.birth_date,\n            'profile[city]':this.profile_info.city,\n            'profile[state]':this.profile_info.state,\n            'profile[zip]':this.profile_info.zip,\n            'profile[country]':this.profile_info.country\n          }\n      };\n\n      const fileTransfer: FileTransferObject = this.fileTransfer.create();\n\n      fileTransfer.upload(this.imagePath, this.baseService.createProfileUrl,\n        options).then((entry) => {\n          this.imagePath = '';\n          this.imageChosen = 0;\n          loading.dismiss();\n          this.flagService.setChangedFlag(true);\n          this.navCtrl.pop();\n          console.log(\"success:\" + JSON.stringify(entry));\n        }, (err) => {\n          loading.dismiss();\n          console.log(\"failed:\" + JSON.stringify(err));\n        });\n    }\n    else{\n      this.userService.createProfiles(this.email, this.auth_token, this.profile_info.first_name, this.profile_info.last_name, this.profile_info.gender, this.profile_info.birth_date,\n        this.profile_info.city, this.profile_info.state, this.profile_info.zip, this.profile_info.country)\n        .subscribe(\n          (data) => {\n            loading.dismiss();\n            if(data.success == false){\n              console.log(\"create Profiles:\" + JSON.stringify(data));\n           }else{\n             console.log(\"create Profiles:\" + JSON.stringify(data));\n             this.flagService.setChangedFlag(true);\n             this.navCtrl.pop();\n           }\n          },\n          (data) => {\n            loading.dismiss();\n            console.log(\"get Profiles:\" + JSON.stringify(data));\n          });\n    }\n  }\n\n\n\n\n\n  dismiss() {\n    this.viewCtrl.dismiss();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-dependent/add-dependent.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AddDependentPage } from './add-dependent';\n@NgModule({\n    declarations: [\n        AddDependentPage,\n    ],\n    imports: [\n        IonicPageModule.forChild(AddDependentPage),\n    ],\n    exports: [\n        AddDependentPage\n    ]\n})\nexport class AddDependentPageModule {\n    \n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-dependent/add-dependent.module.ts"],"sourceRoot":""}